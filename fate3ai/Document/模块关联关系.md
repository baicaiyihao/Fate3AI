### 1. **`fate3ai::profile` 模块**

**主要功能**: 管理用户的个人资料、日常签到、与抽奖 NFT 绑定等功能。
**关联模块**:

- **`fate3ai::taro`**: 使用动态字段与用户资料绑定塔罗牌表。
- **`fate3ai::raffle`**: 在用户资料中绑定 `RaffleNFT`，用于奖励加成和有效期管理。
- **`fate3ai::fate`**: 提供每日签到奖励，调用 `signin2earn` 发放代币奖励。
- **`sui::table`**: 用于存储用户的动态字段（如塔罗牌或其他数据）。

**模块关系**:

- 是用户基础模块，其他模块（如塔罗、抽奖）通过动态字段或其他方法与用户 `Profile` 交互。

------

### 2. **`fate3ai::taro` 模块**

**主要功能**: 管理塔罗牌信息，包括添加、删除和获取塔罗牌记录。
**关联模块**:

- **`fate3ai::profile`**: 用户可以将塔罗牌与个人资料动态绑定。
- **`sui::table`**: 管理塔罗牌的存储，通过 `Table` 存储每张塔罗牌的详细信息。

**模块关系**:

- 作为一种用户数据扩展，通过与 `Profile` 的绑定实现用户个性化的功能。
- 在抽奖（`fate3ai::raffle`）模块中也可用作随机数生成的种子。

------

### 3. **`fate3ai::raffle` 模块**

**主要功能**: 提供抽奖逻辑，支持根据权重概率发放奖励或退款，奖励包括代币或 `RaffleNFT`。
**关联模块**:

- **`fate3ai::profile`**: 用户抽奖时，抽中的 `RaffleNFT` 绑定到 `Profile`，实现奖励加成。
- **`fate3ai::fate`**: 抽奖退款使用 `mint_token`，并通过 `AppTokenCap` 管理代币的发放。
- **`sui::clock`**: 用于抽奖逻辑中生成时间种子。
- **`sui::table`**: 用于存储抽奖的配置、权重和奖励信息。

**模块关系**:

- 提供随机性逻辑，与 `Profile` 模块交互以绑定奖励 NFT，与 `Fate` 模块协同实现代币奖励。

------

### 4. **`fate3ai::pyth` 模块**

**主要功能**: 集成 Pyth 网络，用于实时获取价格数据，例如 SUI/USD 的价格。
**关联模块**:

- **`fate3ai::fate`**: 在代币兑换功能中调用 `use_pyth_price` 获取实时价格，用于计算兑换比例。
- **`sui::clock`**: 校验价格数据的时效性。

**模块关系**:

- 提供实时价格支持，为代币兑换（如 `swap_token`）等功能服务。

------

### 5. **`fate3ai::fate` 模块**

**主要功能**: 管理 `FATE` 代币的发行、转移、价格管理，以及代币与 SUI 的兑换。
**关联模块**:

- **`fate3ai::profile`**: 用户每日签到可通过 `signin2earn` 获得 `FATE` 代币奖励。
- **`fate3ai::raffle`**: 在抽奖功能中，通过 `mint_token` 实现奖励或退款逻辑。
- **`fate3ai::pyth`**: 获取实时价格，用于 SUI 与 `FATE` 代币的兑换。
- **`sui::table`**: 用于存储商品价格和代币价格的记录。

**模块关系**:

- 是系统的核心经济模块，负责所有与代币相关的逻辑，贯穿用户签到、抽奖奖励和代币兑换等核心功能。

------

### 模块依赖关系总结图

```

+-------------------+
| fate3ai::profile  |
| - 用户管理         |
+---------+---------+
          | 
          v 
+-------------------+
| fate3ai::taro     |
| - 动态字段管理     |
+---------+---------+
          |
          v
+-------------------+
| fate3ai::raffle   |
| - 抽奖逻辑         |
+---------+---------+
          |
          v
+-------------------+
| fate3ai::fate     |
| - 代币核心模块     |
+---------+---------+
          |
          v
+-------------------+
| fate3ai::pyth     |
| - 实时价格支持     |
+-------------------+
```

通过上述模块的分工与依赖，`fate3ai` 系统形成了用户管理、奖励分发、抽奖、代币兑换及价格支持的完整闭环功能。